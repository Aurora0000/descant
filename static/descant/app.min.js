var app=angular.module("descant","ngAnimate ngRoute ngCookies ngTagsInput relativeDate infinite-scroll LocalStorageModule pascalprecht.translate descant.config descant.services.tokenservice descant.directives.authforms descant.directives.authmisc descant.directives.authstatus descant.directives.navbtn descant.directives.newtopic descant.directives.taglist descant.directives.topiclist descant.directives.topicview descant.directives.topicview descant.directives.userlist descant.directives.userstats descant.directives.entropyindicator descant.directives.includes descant.directives.resetpass descant.directives.resetconf descant.directives.localeselector descant.directives.navbar descant.directives.newpost descant.directives.themeselector descant.filters.html descant.controllers.routing descant.services.templateservice".split(" "));
app.config(["$routeProvider","$locationProvider","$translateProvider",function(a,b,c){a.when("/",{title:"Home",templateUrl:"pages/topics.html"}).when("/topics",{title:"Topics",templateUrl:"pages/topics.html"}).when("/users",{title:"Users",templateUrl:"pages/users.html"}).when("/admin",{title:"Administration",templateUrl:"pages/admin.html"}).when("/topic/:topicId",{title:"Topic",templateUrl:"pages/post-view.html",controller:"PostViewController"}).when("/topics/:tagId",{title:"Topics",templateUrl:"pages/tag-topics.html",
controller:"TagTopicViewController"}).when("/user/:userId",{title:"User Information",templateUrl:"pages/user-view.html",controller:"UserViewController"}).when("/chat",{title:"Chat",templateUrl:"pages/chat.html"}).when("/login",{title:"Log in",templateUrl:"pages/login.html"}).when("/register",{title:"Register",templateUrl:"pages/register.html"}).when("/logout",{title:"Log out",templateUrl:"pages/logout.html"}).when("/activate",{title:"Account Activation",controller:"ActivateController"}).when("/registered",
{title:"Registration Succeeded!",templateUrl:"pages/registration-done.html"}).when("/usercp",{title:"User Control Panel",templateUrl:"pages/user-cp.html",controller:"UserCPController",controllerAs:"cpCtrl"}).when("/resetpass",{title:"Reset Password",templateUrl:"pages/reset-pass.html"}).when("/reset",{title:"Reset Password",templateUrl:"pages/reset-pass-confirm.html",controller:"ResetPassController"}).when("/404",{title:"Not Found",templateUrl:"pages/404.html"}).otherwise("/404");c.useStaticFilesLoader({prefix:"translations/lang-",
suffix:".json"});c.useSanitizeValueStrategy("escape");c.registerAvailableLanguageKeys(["en","fr","de","ro"],{"en_*":"en","ro_*":"ro","fr_*":"fr","de_*":"de"});c.uniformLanguageTag("java");c.determinePreferredLanguage();c.fallbackLanguage("en");c.useLocalStorage()}]);app.run(["$rootScope","$route","$timeout","$window","descantConfig",function(a,b,c,e,d){a.$on("$routeChangeSuccess",function(){c(function(){e.scrollTo(0,0)},500);document.title=b.current.title+" | "+d.forumName})}]);
angular.module("descant.config",["ngResource"]).config(["$resourceProvider",function(a){a.defaults.stripTrailingSlashes=!1}]).constant("descantConfig",{backend:"//django-descant.rhcloud.com",version:.1,forumName:"Descant Demo Forum",apiPaginationLimit:25,enforcePasswordEntropy:!0,defaultTemplateSet:"default",languages:[{name:"English",value:"en"},{name:"Deutsch",value:"de"},{name:"rom\u00e2n\u0103",value:"ro"},{name:"fran\u00e7ais",value:"fr"},{name:"espa\u00f1ol",value:"es"},{name:"\u7b80\u4f53\u4e2d\u6587",
value:"zh_CN"}],themes:[{name:"Default Theme",value:"default"},{name:"Bootswatch Theme",value:"bootstrap"}]});var tagApp=angular.module("descant.services.tagservice",["descant.config","ngResource"]);tagApp.factory("Tag",["$resource","$cacheFactory","descantConfig",function(a,b,c){return a(c.backend+"/api/v0.1/tags/",{},{query:{method:"GET",cache:!0,isArray:!0}})}]);
tagApp.service("tagService",["$http","$q","$rootScope","descantConfig","Tag",function(a,b,c,e,d){this.tags=[];this.getTagInfo=function(a){return d.query().$promise.then(function(b){return b[a-1]})};this.getAllTags=function(){return this.tags=d.query()}}]);var tplApp=angular.module("descant.services.templateservice",["descant.config","LocalStorageModule"]);
tplApp.service("templateService",["descantConfig","localStorageService",function(a,b){this.currentTemplateSet=function(){var c=b.get("templateSet");if(null!=c)return c;this.setTemplateSet(a.defaultTemplateSet);return a.defaultTemplateSet};this.setTemplateSet=function(a){b.set("templateSet",a)}}]);var tokenApp=angular.module("descant.services.tokenservice",["descant.config","LocalStorageModule"]);
tokenApp.service("tokenService",["$http","$q","$rootScope","$route","descantConfig","localStorageService",function(a,b,c,e,d,h){this.authenticated=!1;this.token="";this.login=function(e,k){this.authenticated=!1;this.token="";var f=this,l=a.post(d.backend+"/api/auth/login/",{username:e,password:k});l.then(function(a){f.token=a.data.auth_token;f.authenticated=!0;h.set("authToken",f.token);f.setHeader();c.$broadcast("auth:statusChange");return a},function(a){f.token="";f.authenticated=!1;h.remove("authToken");
return b.reject(a)});return l};this.logout=function(){var e=a.post(d.backend+"/api/auth/logout/",{}),k=this;e.then(function(a){k.authenticated=!1;k.token="";h.remove("authToken");k.setHeader();c.$broadcast("auth:statusChange");return a},function(a){k.authenticated=!0;return b.reject(a)});return e};this.getToken=function(){if(this.authenticated)return this.token;var a=h.get("authToken");return null!=a?(this.authenticated=!0,this.token=a):!1};this.setHeader=function(){var b=this.getToken();a.defaults.headers.common.Authorization=
0!=b?"Token "+b:null};this.purgeToken=function(){h.remove("authToken")};this.getAuthStatus=function(){var c=this;if(this.loaded&&!this.error)return b(function(a,b){a(c.user)});var h=a.get(d.backend+"/api/auth/me/");h.then(function(a){c.user=a;c.loaded=!0;c.error=!1;return a},function(a){c.loaded=!0;c.error=!0;""!=c.token&&(c.token="",c.purgeToken(),c.setHeader(),e.reload());return b.reject(a)});return h}}]);
var authFormApp=angular.module("descant.directives.authforms",["descant.config","descant.services.tokenservice","descant.services.templateservice"]);authFormApp.directive("loginBox",["tokenService","templateService",function(a,b){return{restrict:"E",templateUrl:function(){return"templates/"+b.currentTemplateSet()+"/users/login-box.html"},controller:["$location",function(c){this.login=function(b,d){a.login(b,d).then(function(a){c.path("/")},function(a){alert("Invalid user/password!")})}}],controllerAs:"loginCtrl"}}]);
authFormApp.directive("registerBox",["templateService",function(a){return{restrict:"E",templateUrl:function(){return"templates/"+a.currentTemplateSet()+"/users/register-box.html"},controller:["$http","$location","descantConfig",function(a,c,e){this.enforce=e.enforcePasswordEntropy;this.register=function(d,h,g){d=a.post(e.backend+"/api/auth/register/",{email:h,username:d,password:g});d.success(function(a){c.path("/registered")});d.error(function(a){alert("There was an error while trying to register.")})}}],
controllerAs:"registerCtrl"}}]);var authMiscApp=angular.module("descant.directives.authmisc",["descant.services.tokenservice"]);authMiscApp.directive("logout",["tokenService","$location",function(a,b){return{restrict:"E",controller:["$location",function(c){a.logout().then(function(a){c.path("/")},function(c){alert("Cannot log out.");a.purgeToken()})}]}}]);authMiscApp.directive("emitToken",["tokenService",function(a){return{restrict:"E",controller:function(){a.setHeader()}}}]);
var authApp=angular.module("descant.directives.authstatus",["descant.config","descant.services.tokenservice","descant.services.templateservice"]);
authApp.directive("authStatus",["$http","tokenService","descantConfig","templateService",function(a,b,c,e){return{restrict:"E",templateUrl:function(){return"templates/"+e.currentTemplateSet()+"/users/auth-status.html"},controller:["$http","$scope","tokenService",function(a,c,b){this.tryAuth=function(){var a=this;b.getAuthStatus().then(function(c){a.user=c.data;a.error=!1},function(c){a.error=!0})};c.tokenServ=b;var e=this;c.$on("auth:statusChange",function(a,c){b.loaded=!1;e.tryAuth()});e.tryAuth()}],
controllerAs:"auth"}}]);var entropyApp=angular.module("descant.directives.entropyindicator",["descant.services.templateservice"]);
entropyApp.directive("entropyIndicator",["templateService",function(a){return{restrict:"E",scope:{password:"=",percentage:"="},templateUrl:function(){return"templates/"+a.currentTemplateSet()+"/users/password-entropy-indicator.html"},controller:["$scope",function(a){a.$watch("password",function(c,e){if(null!=a.password){Math.log2=Math.log2||function(a){return Math.log(a)/Math.LN2};var d=0;/\d/.test(a.password)&&(d+=10);/[a-z]/.test(a.password)&&(d+=26);/[A-Z]/.test(a.password)&&(d+=26);/\W/.test(a.password)&&
(d+=32);d=Math.log2(d);a.entropy=d*a.password.length;a.percentage=a.entropy-20;20>a.entropy?a.percentage=0:120<a.entropy&&(a.percentage=100)}})}],controllerAs:"navCtrl"}}]);var includesApp=angular.module("descant.directives.includes",["descant.services.templateservice"]);includesApp.directive("includes",["templateService",function(a){return{restrict:"E",templateUrl:function(){return"templates/"+a.currentTemplateSet()+"/settings/includes.html"}}}]);
var localeApp=angular.module("descant.directives.localeselector",["pascalprecht.translate","descant.services.templateservice"]);localeApp.directive("localeSelector",["templateService",function(a){return{restrict:"E",templateUrl:function(){return"templates/"+a.currentTemplateSet()+"/settings/locale-selector.html"},controller:["$translate","descantConfig",function(a,c){this.selectedLanguage="select";this.changeLanguage=function(){a.use(this.selectedLanguage.value)};this.arr=c.languages}],controllerAs:"ctrl"}}]);
var navBarApp=angular.module("descant.directives.navbar",["descant.services.templateservice"]);navBarApp.directive("navBar",["templateService",function(a){return{restrict:"E",templateUrl:function(){return"templates/"+a.currentTemplateSet()+"/nav/nav-bar.html"}}}]);var navApp=angular.module("descant.directives.navbtn",["descant.services.templateservice"]);
navApp.directive("navBtn",["templateService",function(a){return{restrict:"AE",require:"^routeUrl",scope:{routeUrl:"@",routeName:"@",routeIcon:"@"},templateUrl:function(){return"templates/"+a.currentTemplateSet()+"/nav/nav-btn.html"},controller:["$scope","$location",function(a,c){this.isActive=function(a){return a==c.path()}}],controllerAs:"navCtrl"}}]);var newPostApp=angular.module("descant.directives.newpost",["descant.config","descant.services.tokenservice","descant.services.templateservice"]);
newPostApp.directive("newPostBox",["templateService",function(a){return{restrict:"E",templateUrl:function(){return"templates/"+a.currentTemplateSet()+"/posts/new-post-box.html"},scope:{postData:"="},controller:["tokenService","$rootScope","$location","$scope","$http","descantConfig",function(a,c,e,d,h,g){this.submitting=!1;this.auth=a.authenticated;var k=this;c.$on("auth:statusChange",function(){k.auth=a.authenticated});this.showNTP=!1;this.toggleNTP=function(){this.showNTP=1==this.showNTP?!1:!0};
this.addReply=function(a){this.submitting=!0;var b=this;h.post(g.backend+"/api/v0.1/topics/"+d.postData.id+"/replies/",{contents:a}).success(function(a){b.submitting=!1;e.path("/topic/"+d.postData.id);b.toggleNTP();c.$broadcast("topic:refresh")}).error(function(a){b.submitting=!1;alert("Error!")})}}],controllerAs:"newPostCtrl"}}]);var newTopicApp=angular.module("descant.directives.newtopic",["descant.config","descant.services.tokenservice","descant.services.templateservice"]);
newTopicApp.directive("newTopicBox",["templateService",function(a){return{restrict:"E",templateUrl:function(){return"templates/"+a.currentTemplateSet()+"/topics/new-topic-box.html"},controller:["tokenService","tagService","$rootScope","$location","$http","descantConfig",function(a,c,e,d,h,g){this.auth=a.authenticated;this.submitting=!1;var k=this;e.$on("auth:statusChange",function(){k.auth=a.authenticated});this.showNTP=!1;this.toggleNTP=function(){this.showNTP=1==this.showNTP?!1:!0};this.addTopic=
function(a,c,b){this.submitting=!0;var k;for(k=0;k<b.length;k++)b[k]=parseInt(b[k].id);var m=this;h.post(g.backend+"/api/v0.1/topics/",{title:a,contents:c,tag_ids:b}).success(function(a){m.submitting=!1;d.path("/topics");m.toggleNTP();e.$broadcast("topics:refresh")}).error(function(a){m.submitting=!1;alert("Error!")})};this.loadTags=function(){return c.getAllTags().$promise}}],controllerAs:"newTopicCtrl"}}]);var resetCApp=angular.module("descant.directives.resetconf",["descant.config","descant.services.templateservice"]);
resetCApp.directive("resetPasswordConfirm",["$location","templateService",function(a,b){return{restrict:"E",templateUrl:function(){return"templates/"+b.currentTemplateSet()+"/users/password-reset-confirm.html"},controller:["$rootScope","$http","descantConfig",function(c,e,b){this.reset=function(c,g,k){e.post(b.backend+"/api/auth/password/reset/confirm/",{uid:c,token:g,new_password:k}).success(function(c){a.path("/")}).error(function(a){alert("Error!")})}}],controllerAs:"resetCtrl"}}]);
var resetApp=angular.module("descant.directives.resetpass",["descant.config","descant.services.templateservice"]);
resetApp.directive("resetPassword",["templateService",function(a){return{restrict:"E",templateUrl:function(){return"templates/"+a.currentTemplateSet()+"/users/password-reset.html"},controller:["$rootScope","$http","$location","descantConfig",function(a,c,e,d){this.reset=function(a){c.post(d.backend+"/api/auth/password/reset/",{email:a}).success(function(a){e.path("/")}).error(function(a){alert("Error!")})}}],controllerAs:"resetCtrl"}}]);
tagApp=angular.module("descant.directives.taglist",["descant.config","descant.services.tagservice","descant.services.templateservice"]);
tagApp.directive("tagList",["tagService","templateService",function(a,b){return{restrict:"E",templateUrl:function(){return"templates/"+b.currentTemplateSet()+"/topics/tag-list.html"},controller:["$rootScope","$http","$location","descantConfig",function(c,e,b,h){this.showTags=!1;this.toggleBox=function(){this.showTags=1==this.showTags?!1:!0};var g=this;this.updateList=function(){g.list=a.getAllTags()};this.updateList()}],controllerAs:"tagCtrl"}}]);
var themeApp=angular.module("descant.directives.themeselector",["descant.services.templateservice"]);
themeApp.directive("themeSelector",["templateService",function(a){return{restrict:"E",templateUrl:function(){return"templates/"+a.currentTemplateSet()+"/settings/theme-selector.html"},controller:["$translate","$window","descantConfig",function(b,c,e){this.selectedTheme=a.currentTemplateSet();this.changeTheme=function(){a.setTemplateSet(this.selectedTheme.value);c.location.reload()};this.arr=e.themes}],controllerAs:"ctrl"}}]);
var topicListApp=angular.module("descant.directives.topiclist",["descant.config","descant.services.templateservice"]);
topicListApp.directive("topicList",["descantConfig","templateService",function(a,b){return{restrict:"E",templateUrl:function(){return"templates/"+b.currentTemplateSet()+"/topics/topic-list.html"},scope:{url:"@"},controller:["$http","$scope","$interval","$rootScope",function(c,e,b,h){var g=this;this.list=[];this.busy=!1;this.offset=0;this.limit=a.apiPaginationLimit;this.end=!1;this.updateList=function(){if(!g.busy&&!g.end){g.busy=!0;var b=c.get(a.backend+e.url+"?limit="+g.limit.toString()+"&offset="+
g.offset.toString());b.success(function(a){if(0==a.results.length)g.end=!0;else{for(var c=a.results,b=0;b<c.length;b++)g.list.push(c[b]);g.offset+=a.results.length;g.busy=!1}});b.error(function(a){g.busy=!1;g.end=!0})}};this.refreshList=function(){g.busy=!0;g.end=!1;var b=c.get(a.backend+e.url+"?limit="+g.offset.toString()+"&offset=0");b.success(function(a){0==a.results.length?g.end=!0:(g.list=a.results,g.busy=!1)});b.error(function(a){g.busy=!1;g.end=!0})};this.stopRefreshList=b(this.refreshList,
45E3);h.$on("topics:refresh",function(){g.refreshList()});h.$on("$destroy",function(){b.cancel(g.stopRefreshList)})}],controllerAs:"topics"}}]);var topicTagsApp=angular.module("angular.directives.topictags",["descant.services.tagservice","descant.services.templateservice"]);
tagApp.directive("topicTags",["tagService","templateService",function(a,b){return{restrict:"E",templateUrl:function(){return"templates/"+b.currentTemplateSet()+"/topics/topic-tags.html"},scope:{tagItems:"="},controller:["$scope",function(c){this.tags=[];this.updateTags=function(){var b;for(b=0;b<c.tagItems.length;b++){var d=this;a.getTagInfo(parseInt(c.tagItems[b])).then(function(a){null!=a&&d.tags.push(a)})}};this.updateTags()}],controllerAs:"tags"}}]);
var topicViewApp=angular.module("descant.directives.topicview",["descant.config","descant.filters.html","descant.services.templateservice"]);
topicViewApp.directive("topicFirstpost",["descantConfig","templateService",function(a,b){return{restrict:"E",templateUrl:function(){return"templates/"+b.currentTemplateSet()+"/topics/topic-firstpost.html"},scope:{postData:"=",topicId:"="},controller:["$http","$scope","$location","$route","tagService","tokenService",function(c,b,d,h,g,k){this.editing=!1;var f=this;f.loaded=!1;var l=c.get(a.backend+"/api/v0.1/topics/"+b.topicId+"/");l.success(function(c){f.post=c;b.postData=c;f.loaded=!0;document.title=
f.post.title+" | "+a.forumName;b.user=null!=k.user?k.user.data.id:-1});l.error(function(a){f.loaded=!0;f.error=!0});this.lock=function(){c.put(a.backend+"/api/v0.1/topics/"+b.topicId+"/",{title:f.post.title,contents:f.post.contents,tag_ids:f.post.tag_ids,is_locked:!0}).success(function(){h.reload()})};this.unlock=function(){c.put(a.backend+"/api/v0.1/topics/"+b.topicId+"/",{title:f.post.title,contents:f.post.contents,tag_ids:f.post.tag_ids,is_locked:!1}).success(function(){h.reload()})};this.edit=
function(){this.editing=!this.editing;b.tag_ids_edited=[];b.contents_edited=f.post.contents;b.title_edited=f.post.title;for(var a=0;a<f.post.tag_ids.length;a++)g.getTagInfo(f.post.tag_ids[a]).then(function(a){null!=a&&b.tag_ids_edited.push(a)})};this.editSubmit=function(){for(var d=b.tag_ids_edited,g=0;g<d.length;g++)d[g]=parseInt(d[g].id);var f=this;c.put(a.backend+"/api/v0.1/topics/"+b.topicId+"/",{title:b.title_edited,contents:b.contents_edited,tag_ids:d}).success(function(a){f.edit()})};this.deleteObj=
function(){c["delete"](a.backend+"/api/v0.1/topics/"+b.topicId+"/").success(function(a){d.path("/")})};this.loadTags=function(){return g.getAllTags()}}],controllerAs:"topic"}}]);
topicViewApp.directive("replyItem",["templateService",function(a){return{restrict:"E",templateUrl:function(){return"templates/"+a.currentTemplateSet()+"/posts/reply-item.html"},scope:{post:"="},controller:["$http","$scope","$route","descantConfig","tokenService",function(a,c,e,d,h){this.editing=!1;c.user=null!=h.user?h.user.data.id:-1;this.edit=function(){c.contents_edited=c.post.contents;this.editing=!this.editing};this.editSubmit=function(){a.put(d.backend+"/api/v0.1/posts/"+c.post.id+"/",{contents:c.contents_edited}).success(function(a){e.reload()})};
this.deleteObj=function(){var g=a["delete"](d.backend+"/api/v0.1/posts/"+c.post.id+"/");g.success(function(a){e.reload()});g.error(function(a){alert("Unexpected error!")})}}],controllerAs:"postCtrl"}}]);
topicViewApp.directive("postList",["descantConfig","templateService",function(a,b){return{restrict:"E",templateUrl:function(){return"templates/"+b.currentTemplateSet()+"/posts/reply-list.html"},scope:{url:"@"},controller:["$http","$interval","$route","$rootScope","$scope","tokenService",function(b,e,d,h,g,k){var f=this;this.list=[];this.busy=!1;this.offset=0;this.limit=a.apiPaginationLimit;this.end=!1;this.updateList=function(){if(!f.busy&&!f.end){f.busy=!0;var d=b.get(a.backend+g.url+"?limit="+f.limit.toString()+
"&offset="+f.offset.toString());d.success(function(a){if(0==a.results.length)f.end=!0;else{for(var b=a.results,c=0;c<b.length;c++)f.list.push(b[c]);f.offset+=a.results.length;f.busy=!1}});d.error(function(a){f.busy=!1;f.end=!0})}};this.refreshList=function(){f.busy=!0;f.end=!1;var d=b.get(a.backend+g.url+"?limit="+f.offset.toString()+"&offset=0");d.success(function(a){0==a.results.length?f.end=!0:(f.list=a.results,f.busy=!1)});d.error(function(a){f.busy=!1;f.end=!0})};this.stopRefreshList=e(this.refreshList,
45E3);h.$on("topic:refresh",function(){f.refreshList()});this.destroy=function(){e.cancel(f.stopRefreshList)};h.$on("$destroy",function(){f.destroy()});h.$on("$locationChangeSuccess",function(){f.destroy()})}],controllerAs:"posts"}}]);var userListApp=angular.module("descant.directives.userlist",["descant.config","descant.services.templateservice"]);
userListApp.directive("userList",["descantConfig","templateService",function(a,b){return{restrict:"E",templateUrl:function(){return"templates/"+b.currentTemplateSet()+"/users/user-list.html"},controller:["$http",function(b){var e=this;this.list=[];this.busy=!1;this.offset=0;this.limit=a.apiPaginationLimit;this.end=!1;this.updateList=function(){if(!this.busy&&!this.end){this.busy=!0;var d=b.get(a.backend+"/api/v0.1/users/?limit="+this.limit.toString()+"&offset="+this.offset.toString());d.success(function(a){if(0==
a.results.length)e.end=!0;else{for(var b=a.results,c=0;c<b.length;c++)e.list.push(b[c]);e.offset+=a.results.length;e.busy=!1}});d.error(function(a){e.busy=!1;e.end=!0})}}}],controllerAs:"users"}}]);var userStatsApp=angular.module("descant.directives.userstats",["descant.config","descant.services.templateservice"]);
userListApp.directive("userStats",["descantConfig","tokenService","templateService",function(a,b,c){return{restrict:"E",scope:{userId:"@"},templateUrl:function(){return"templates/"+c.currentTemplateSet()+"/users/user-stats.html"},controller:["$http","$scope",function(c,d){var h=this;b.getAuthStatus().then(function(a){h.user_auth=a.data});var g=c.get(a.backend+"/api/v0.1/users/"+d.userId+"/");g.success(function(a){h.user=a;h.loaded=!0});g.error(function(a){h.loaded=!0;h.error=!0})}],controllerAs:"userCtrl"}}]);
var controllerApp=angular.module("descant.controllers.routing",["descant.config"]);controllerApp.controller("PostViewController",["$scope","$routeParams",function(a,b){a.topicId=b.topicId}]);controllerApp.controller("UserViewController",["$scope","$location","$routeParams",function(a,b,c){-1!=c.userId?a.userId=c.userId:b.path("/users")}]);controllerApp.controller("TagTopicViewController",["$scope","$routeParams",function(a,b){a.tagId=b.tagId}]);
controllerApp.controller("ActivateController",["$http","descantConfig","$location","$routeParams",function(a,b,c,e){a=a.post(b.backend+"/api/auth/activate/",{uid:e.uid,token:e.token});a.success(function(a){c.path("/login")});a.error(function(a){alert("Error while activating account!")})}]);controllerApp.controller("ResetPassController",["$scope","$routeParams",function(a,b){a.uid=b.uid;a.tok=b.token}]);
controllerApp.controller("UserCPController",["$http","$location","descantConfig",function(a,b,c){this.options=!1;this.changeUser=function(e,d){a.post(c.backend+"/api/auth/username/",{new_username:e,current_password:d}).success(function(a){b.path("/")}).error(function(a){alert("Error! Is your current password correct?")})};this.changeEmail=function(e){a.patch(c.backend+"/api/auth/me/",{email:e}).success(function(a){b.path("/")}).error(function(a){alert("Error! Is your current password correct?")})};
this.changePassword=function(e,d){a.post(c.backend+"/api/auth/password/",{current_password:d,new_password:e}).success(function(a){b.path("/")}).error(function(a){alert("Error! Is your current password correct?")})};this.showOptions=function(){this.options=!0}}]);var htmlApp=angular.module("descant.filters.html",[]);app.filter("html",["$sce",function(a){return function(b){return a.trustAsHtml(b)}}]);
